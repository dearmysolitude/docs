---
subject: 데이터 모델링의 이해
chapter: 2장 데이터 모델과 성능
---
## 반정규화(Denormalization)
데이터 중복을 허용하여 조인을 줄이는 DB 성능 향상 방법, 데이터의 무결성을 희생하고 조회 성능을 향상시킨다.
### 적용 절차
1. 반정규화 대상 확인: 데이터 처리 범위 및 통계성 등을 조사
2. 다른 방법 검토
	1) 뷰 방식 변화
	2) 클러스터링
	3) 인덱스 검색화
	4) 애플리케이션 단에서 로직 수정
3. 반정규화: 정규화 수행 후 최적화를 위한 도구로 사용한다.
### 방법
#### 1. 테이블 반정규화
테이블에서 중복되는 데이터를 하나 혹은 그 이상의 테이블에 추가하는 것이다. 정규화 후에 적용되며, 데이터베이스의 쓰기 성능을 희생하여 읽기 성능을 증가시키기 위해 흔히 적용된다.
- 테이블 병합
	- 1:1 관계 테이블 병합
	- 1:N 관계 테이블 병합: 많은 데이터 중복 발생
	- [[슈퍼 타입과 서브 타입 테이블 병합]]
- 테이블 분할
	- 수직 분할
	- 수평 분할
- 테이블 추가
	- 중복 테이블: 업무나 서버가 다를 경우, 원격 조인을 제거하기 위함
	- 통계 테이블
	- 이력 테이블
	- 부분 테이블: 자주 이용하는 칼럼으로 구성된 테이블
#### 2. 칼럼 반정규화
- 중복 칼럼 추가
- 파생 칼럼 추가: 필요한 값을 미리 계산한 칼럼 추가
- 이력 테이블 칼럼 추가
- PK에 의한 칼럼 추가: PK의 종속자를 일반 속성으로 생성
- 응용 시스템의 오작동을 고려 칼럼 추가
#### 3. 관계 반정규화
- 중복 관계 추가

## 반정규화의 결과
1. 장점
	- 적은 조인을 하므로 데이터를 읽어오는 성능을 향상시킨다.
	- 적은 테이블을 고려해야 하므로 쿼리가 간단해질 수 있다. 
2. 단점
	- 업데이트와 데이터 추가의 비용이 정규화 이전보다 커진다.
	- 코드를 업데이트하고 추가하는데 어렵게 할 수 있다.
	- 데이터가 inconsistent할 수 있다.
	- 데이터의 중복으로 인해 추가 저장 공간의 필요성이 생긴다.

## 유의 사항
반정규화 모델은 정규화를 하기 전의 모델과 동일하지 않다. 반정규화는 반드시 정규화 요구 사항 수준에 따라 진행된 후, 이러한 디자인으로 발생한 anomaly를 다루기 위한 방편으로 적용하는 것이다.

[Denormalization - Wikipedia](https://en.wikipedia.org/wiki/Denormalization)